version: 0.1
component: build
timeoutInSeconds: 6000
runAs: root
shell: bash
env:
  variables:
    tag : "1.1"
  exportedVariables:
    - tag
    - version

steps:
  - type: Command
    name: "Dockerize"
    command: |
      docker build . -t flask_ex:${tag}
      docker run -d -p 5000:5000 flask_ex:${tag} > flask_app_result.txt
      version=`cat ./version.txt`

outputArtifacts:
  - name: flask_app_result
    type: BINARY
    location: flask_app_result.txt

